<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Game Site</title>
    <link rel="stylesheet" href="style.css">
    <style>
      .board-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background-color: white; /* Light gray background for the container */
    }
    .board {
        display: grid;
        grid-template-columns: repeat(3, 100px);
        grid-gap: 5px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Subtle shadow for the board */
    }
    .cell {
        width: 100px;
        height: 100px;
        background-color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        color: #333;
        border: 2px solid #ddd;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .cell:hover {
        background-color: #e0e0e0; /* Lighten cell on hover for a visual effect */
    }
    .modal2 {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }
  </style>

  </head>
  <body>
    <div id="top">
      <h1>Cooler Math Games(Sorry for ugliness)</h1>
    </div>
    <ul>
      <li class="dropdown">
        <a href="javascript:void(0)" class="dropbtn">Games</a>
        <div class="dropdown-content">
          <a href="rockpaperscissors.html">Rock Paper Scissors</a>
          <a href="tictactoe.html">Tic Tac Toe</a>
          <a href="connectfour.html">Connect 4</a>
        </div>
      </li>
      <li><a href="history.html">History</a></li>
      <li><a href="creator.html">Creators</a></li>
      <li ><a href="" id="Profile">Profile</a></li>
    </ul>
    
    <div id="myModal" class="modal">
      <div class="modal-content">
        <span class="close">▷</span>
        <span class="restart">↻</span>
        <h1>How To Play</h1>
        <p>
          Tic tac toe is a skill-based games where each player is assigned either 'X' or 'O'. The 
          objective is to get 3 in a row within the 3x3 grid with your letter, whether it be vertical, diagonal, or horizontal. 
        <br><br>
          To play, simply click on the box on the grid that you would like to place your letter, the 
          slot will populate with your respective letter, once you have reached 3 in a row, you have won. If all slots are filled,
          and nobody has 3 in a row, the game is a tie.
        </p>
      </div>
    </div>

    <div class="board-container">
      <div class="board">
          <div class="cell" id="00" onclick="makeMove(this)"> </div>
          <div class="cell" id="01" onclick="makeMove(this)"> </div>
          <div class="cell" id="02" onclick="makeMove(this)"> </div>
          <div class="cell" id="10" onclick="makeMove(this)"> </div>
          <div class="cell" id="11" onclick="makeMove(this)"> </div>
          <div class="cell" id="12" onclick="makeMove(this)"> </div>
          <div class="cell" id="20" onclick="makeMove(this)"> </div>
          <div class="cell" id="21" onclick="makeMove(this)"> </div>
          <div class="cell" id="22" onclick="makeMove(this)"> </div>
      </div>
      <div>
        <button id="menuBtn">Open Menu</button>
      </div>
    </div>

    <div id="winModal" class="modal2">
      <div class="modal-content">
        <span id="closeWin" class="close">Close</span>
        <span id="restartWin" class="restart">Restart Game</span>
        <p id="winMessage">Congrats!! You have won the game!!</p>
      </div>
    </div>

    
  <footer>
      CSE 201 Group 7
      We Love Dr. Khamaiseh
  </footer>
  <script src="index.js"></script>
  <script>
    let currentPlayer = 'X'; // Starting player
    let turnCount = 0;
    let board = [
          ["", "", ""],
          ["", "", ""],
          ["", "", ""]
      ];
  
      function makeMove(cell) {
          if (cell.innerText === '') {
              cell.innerText = currentPlayer;
              turnCount++;
              
              let id = cell.id;
              board[id[0]][id[1]] = currentPlayer;
              //board.forEach(row => {
              //    row.forEach(value => {
              //      console.log(value);
              //    });
              //}); 
              checkWin(currentPlayer);
              currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
          }
      }
  
      function checkWin(currentPlayer) {
          if ((board[0][0] != "") && board[0][0] == board[0][1] && board[0][0] == board[0][2]) {
              console.log("Congrats " + currentPlayer);
              document.querySelector("#winModal").style.display = "block";
          } else if ((board[1][0] != "") &&board[1][0] == board[1][1] && board[1][0] == board[1][2]) {
              console.log("Congrats " + currentPlayer);
              document.querySelector("#winModal").style.display = "block";
          } else if ((board[2][0] != "") &&board[2][0] == board[2][1] && board[2][0] == board[2][2]) {
              console.log("Congrats " + currentPlayer);
              document.querySelector("#winModal").style.display = "block";
          } else if ((board[0][0] != "") &&board[0][0] == board[1][0] && board[0][0] == board[2][0]) {
              console.log("Congrats " + currentPlayer);
              document.querySelector("#winModal").style.display = "block";
          } else if ((board[0][1] != "") &&board[0][1] == board[1][1] && board[0][1] == board[2][1]) {
              console.log("Congrats " + currentPlayer);
              document.querySelector("#winModal").style.display = "block";
          } else if ((board[0][2] != "") &&board[0][2] == board[1][2] && board[0][2] == board[2][2]) {
              console.log("Congrats " + currentPlayer);
              document.querySelector("#winModal").style.display = "block";
          } else if ((board[0][0] != "") &&board[0][0] == board[1][1] && board[0][0] == board[2][2]) {
              console.log("Congrats " + currentPlayer);
              document.querySelector("#winModal").style.display = "block";
          } else if ((board[0][2] != "") &&board[0][2] == board[1][1] && board[0][2] == board[2][0]) {
              console.log("Congrats " + currentPlayer);
              document.querySelector("#winModal").style.display = "block";
          } else if (turnCount == 9) {
              document.querySelector("#winMessage").textContent = "Its a draw...";
              document.querySelector("#winModal").style.display = "block";
          }
      }

      document.addEventListener("DOMContentLoaded", function() {
        let modal2 = document.querySelector("#winModal");

        let winRestart = document.querySelector("#restartWin");

        let winClose = document.querySelector("#closeWin");

        winRestart.onclick = function() {
          window.location.reload();
          modal2.style.display = "none";
        }

         winClose.onclick = function() {
           modal2.style.display = "none";
         }
      })
  
  </script>
  </body>
</html>
